<template>
    <lightning-card title={componentLabel} variant="narrow" icon-name="standard:account">
        <lightning-record-edit-form record-id={recordId} object-api-name={OBJECT_API_NAME} onsuccess={handleQSuccess} onsubmit={validateFields}  onerror={handleQError}>
            <template if:true={parentId}>
                <lightning-input-field field-name={PARENT_ACCOUNT_API_NAME} value={parentId} hidden variant="standard" ></lightning-input-field>
            </template>
            <div class="slds-grid slds-wrap">
                <template for:each={fieldsData} for:item="field">
                    <div key={field.fieldSetLabel} class="slds-col slds-size_6-of-12">
                        <div  class="slds-section slds-is-open slds-m-around_xx-small">
                            <h3 class="slds-section__title" style=" background-color: rgb(238, 238, 238); padding: 0px 5px;">
                                <span class="slds-truncate" title={field.fieldSetLabel}>{field.fieldSetLabel}</span>
                            </h3>
                            <div aria-hidden="true" class="slds-section__content" id={field.fieldSetName}>
                                
                                <template if:true={field.Fields}>
                                    <template for:each={field.Fields} for:item="f">
                                        <div key={f.Id} >
                                            <lightning-input-field field-name={f.APIName} required={f.DBRequired} variant="standard"></lightning-input-field>
                                        </div>
                                    </template>
                                </template>
                                <template if:false={field.Fields}>
                                    <div class="slds-is-relative full-width">
                                        <lightning-spinner alternative-text="Loading" variant="brand" size="medium"></lightning-spinner>
                                    </div>
                                </template>
                                
                            </div>
                        </div>
                    </div>
                </template>
            </div>
        </lightning-record-edit-form>
    </lightning-card>
</template>